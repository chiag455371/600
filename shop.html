<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“åˆ—è¡¨ | Product List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .category-btn {
            transition: all 0.3s ease;
        }
        .category-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .loading {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-store text-3xl"></i>
                    <h1 class="text-2xl font-bold" id="siteTitle">å°å®¶é›»å°ˆè³£</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Language Switcher -->
                    <div class="relative">
                        <button id="langBtn" class="flex items-center space-x-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg">
                            <span id="currentLang">ğŸ‡»ğŸ‡³ VI</span>
                            <i class="fas fa-chevron-down text-sm"></i>
                        </button>
                        <div id="langMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl overflow-hidden">
                            <a href="?lang=vi" class="block px-4 py-2 text-gray-800 hover:bg-purple-50">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</a>
                            <a href="?lang=th" class="block px-4 py-2 text-gray-800 hover:bg-purple-50">ğŸ‡¹ğŸ‡­ à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</a>
                            <a href="?lang=en" class="block px-4 py-2 text-gray-800 hover:bg-purple-50">ğŸ‡µğŸ‡­ English</a>
                            <a href="?lang=id" class="block px-4 py-2 text-gray-800 hover:bg-purple-50">ğŸ‡®ğŸ‡© Bahasa Indonesia</a>
                        </div>
                    </div>
                    <a href="index.html" class="hover:bg-white/20 px-4 py-2 rounded-lg">
                        <i class="fas fa-home"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Categories -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4" id="categoryTitle">å•†å“åˆ†é¡</h2>
            <div class="flex flex-wrap gap-3" id="categoryList">
                <button class="category-btn active px-6 py-3 rounded-full bg-gray-200 text-gray-800 font-semibold" data-category="all">
                    å…¨éƒ¨å•†å“
                </button>
                <!-- Categories will be loaded here -->
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="loading"></div>

        <!-- Products Grid -->
        <div id="productGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Products will be loaded here -->
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden text-center py-16">
            <i class="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
            <p class="text-xl text-gray-500" id="emptyText">æš«ç„¡å•†å“</p>
        </div>
    </main>

    <!-- Scripts -->
    <script>
        // 1. å®šä¹‰å¤šè¯­è¨€æ–‡æœ¬æ˜ å°„ï¼ˆæ ¸å¿ƒï¼šæŠŠæ‰€æœ‰éœ€è¦åˆ‡æ¢çš„æ–‡æœ¬æŒ‰è¯­è¨€åˆ†ç±»ï¼‰
        const langTexts = {
            vi: {
                siteTitle: "Cá»­a hÃ ng Ä‘á»“ gia dá»¥ng nhá»",
                categoryTitle: "Danh má»¥c sáº£n pháº©m",
                allProducts: "Táº¥t cáº£ sáº£n pháº©m",
                emptyText: "KhÃ´ng cÃ³ sáº£n pháº©m"
            },
            th: {
                siteTitle: "à¸£à¹‰à¸²à¸™à¸‚à¸²à¸¢à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹ƒà¸Šà¹‰à¹„à¸Ÿà¸Ÿà¹‰à¸²à¸‚à¸™à¸²à¸”à¹€à¸¥à¹‡à¸",
                categoryTitle: "à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²",
                allProducts: "à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”",
                emptyText: "à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²"
            },
            en: {
                siteTitle: "Small Appliances Store",
                categoryTitle: "Product Categories",
                allProducts: "All Products",
                emptyText: "No products available"
            },
            id: {
                siteTitle: "Toko Alat Rumah Tangga Kecil",
                categoryTitle: "Kategori Produk",
                allProducts: "Semua Produk",
                emptyText: "Tidak ada produk"
            },
            // é»˜è®¤ç¹ä½“ä¸­æ–‡
            zh: {
                siteTitle: "å°å®¶é›»å°ˆè³£",
                categoryTitle: "å•†å“åˆ†é¡",
                allProducts: "å…¨éƒ¨å•†å“",
                emptyText: "æš«ç„¡å•†å“"
            }
        };

        // 2. è·å–URLä¸­çš„è¯­è¨€å‚æ•°ï¼ˆ?lang=xxxï¼‰
        function getLangFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang');
            // éªŒè¯è¯­è¨€å‚æ•°æ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆåˆ™ç”¨é»˜è®¤zh
            return ['vi', 'th', 'en', 'id'].includes(lang) ? lang : 'zh';
        }

        // 3. æ ¹æ®è¯­è¨€æ›´æ–°é¡µé¢æ–‡æœ¬
        function updatePageText(lang) {
            const texts = langTexts[lang];
            // æ›´æ–°é¡µé¢å…ƒç´ æ–‡æœ¬
            document.getElementById('siteTitle').textContent = texts.siteTitle;
            document.getElementById('categoryTitle').textContent = texts.categoryTitle;
            document.querySelector('.category-btn[data-category="all"]').textContent = texts.allProducts;
            document.getElementById('emptyText').textContent = texts.emptyText;
            // æ›´æ–°å½“å‰è¯­è¨€æ˜¾ç¤º
            const langLabels = { vi: 'ğŸ‡»ğŸ‡³ VI', th: 'ğŸ‡¹ğŸ‡­ TH', en: 'ğŸ‡µğŸ‡­ EN', id: 'ğŸ‡®ğŸ‡© ID', zh: 'ğŸ‡¹ğŸ‡¼ ZH' };
            document.getElementById('currentLang').textContent = langLabels[lang];
        }

        // 4. è¯­è¨€èœå•äº¤äº’ï¼ˆå±•å¼€/æ”¶èµ·ï¼‰
        document.getElementById('langBtn').addEventListener('click', function() {
            const langMenu = document.getElementById('langMenu');
            langMenu.classList.toggle('hidden');
        });

        // ç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸæ”¶èµ·è¯­è¨€èœå•
        document.addEventListener('click', function(e) {
            const langBtn = document.getElementById('langBtn');
            const langMenu = document.getElementById('langMenu');
            if (!langBtn.contains(e.target) && !langMenu.contains(e.target)) {
                langMenu.classList.add('hidden');
            }
        });

        // 5. é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–è¯­è¨€
        window.onload = function() {
            const currentLang = getLangFromUrl();
            updatePageText(currentLang);
            
            // éšè—loadingï¼ˆå¦‚æœæš‚æ—¶æ²¡æœ‰å•†å“æ•°æ®ï¼Œå…ˆéšè—loadingæ˜¾ç¤ºç©ºçŠ¶æ€ï¼‰
            document.getElementById('loading').style.display = 'none';
            document.getElementById('emptyState').classList.remove('hidden');
        };
    </script>
    <!-- ä¿ç•™åŸæœ‰JSæ–‡ä»¶ï¼ˆç¡®ä¿ä»“åº“é‡Œæœ‰è¿™äº›æ–‡ä»¶ï¼Œè·¯å¾„æ­£ç¡®ï¼‰ -->
    <script src="js/affiliate-tracker.js"></script>
    <script src="js/shop.js"></script>
</body>
</html>
